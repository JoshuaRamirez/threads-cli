# commands/ - CLI Commands

Each file implements a single CLI command. All commands follow the same pattern.

## Command Pattern

```typescript
import { Command } from 'commander';
import { /* storage functions */ } from 'threads-storage';
import { /* types */ } from 'threads-types';
import { /* formatters */ } from '../utils';
import chalk from 'chalk';

export const myCommand = new Command('command-name')
  .description('What this command does')
  .argument('<required>', 'Description of required arg')
  .argument('[optional]', 'Description of optional arg')
  .option('-f, --flag', 'Boolean flag')
  .option('-v, --value <val>', 'Option with value')
  .action((arg1, arg2, options) => {
    // Implementation
  });
```

## Available Commands

| Command | Alias | Purpose |
|---------|-------|---------|
| new | - | Create a new thread |
| list | - | List threads with filters |
| show | - | Show thread details |
| progress | p | Add progress note |
| edit-progress | - | Edit or delete progress entries |
| set | - | Update thread properties |
| spawn | - | Create a sub-thread |
| details | - | Add/update thread details |
| group | - | Manage groups |
| tag | - | Add/remove tags |
| depend | - | Manage dependencies |
| archive | - | Archive threads |
| clone | - | Clone a thread |
| merge | - | Merge threads |
| search | - | Search threads |
| overview | - | Show summary view |
| agenda | - | Show prioritized view |
| timeline | - | Show chronological view |
| next | - | Suggest next thread |
| batch | - | Batch operations |
| move-progress | - | Move progress between threads |
| undo | - | Restore from backup |

## Thread Resolution Pattern

Most commands accept a thread identifier that can be:
1. Full UUID
2. Partial UUID (prefix match)
3. Exact thread name
4. Partial name (substring match)

Standard resolution pattern:
```typescript
let thread = getThreadById(identifier);
if (!thread) {
  thread = getThreadByName(identifier);
}
if (!thread) {
  // Try partial match...
}
```

## Output Conventions

- Use `chalk.green()` for success messages
- Use `chalk.red()` for errors
- Use `chalk.yellow()` for warnings or multiple matches
- Use `chalk.dim()` for secondary information
- Import formatters from `../utils` for consistent thread display

## Adding a New Command

1. Create `src/commands/<name>.ts` with the command pattern above
2. Export from `src/commands/index.ts`: `export { myCommand } from './my-command';`
3. Import and register in `src/index.ts`: `program.addCommand(myCommand);`
